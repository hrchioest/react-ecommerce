(this.webpackJsonpecommerce=this.webpackJsonpecommerce||[]).push([[0],{102:function(e,t,a){},112:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),l=a.n(c),o=(a(102),a(82)),i=a(17),m=a(13),u=a(24),s=a(11),d=a(150),f=a(151),p=a(152),E=a(145),h=a(148),g=a(78),b=a.n(g),v=r.a.createContext(),j=function(){var e=r.a.useContext(v).cantTotal;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,r.a.createElement(h.a,{badgeContent:e(),color:"secondary",showZero:!0},r.a.createElement(b.a,null))))},y=a(149),x=Object(y.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1,padding:"7px",height:"43px"},formControl:{margin:e.spacing(1),minWidth:180},cat:{color:"black",textDecoration:"none"}}})),O=a(169),C=a(153),k=a(171),w=a(165),I=a(37),S=(a(74),I.initializeApp({apiKey:"AIzaSyCQWAnM8Svs3PfRB0ImV_KWrmTPW3y-HHk",authDomain:"react-ecommerce-740c2.firebaseapp.com",databaseURL:"https://react-ecommerce-740c2.firebaseio.com",projectId:"react-ecommerce-740c2",storageBucket:"react-ecommerce-740c2.appspot.com",messagingSenderId:"381973464289",appId:"1:381973464289:web:fc3a2065c6796f9ec823a0",measurementId:"G-GPGYL05WW9"}));function N(){return I.firestore(S)}var W=function(){var e=Object(s.f)().push,t=x(),a=Object(n.useState)([]),c=Object(m.a)(a,2),l=c[0],o=c[1];Object(n.useEffect)((function(){N().collection("categories").get().then((function(e){0===e.size&&console.log("no results"),o(e.docs.map((function(e){return Object(i.a)({},e.data(),{id:e.id})})))})).catch((function(e){console.log("Error searching categories",e)}))}),[]),console.log(l);var E=Object(s.g)().pathname,h=r.a.useState("/"===E||"/cart"===E?"none":function(e){return e.split("/").slice(-1).pop()}(E)),g=Object(m.a)(h,2),b=g[0],v=g[1];Object(n.useEffect)((function(){"/"===E&&v("none")}),[E]);return r.a.createElement("div",{className:t.root},r.a.createElement(d.a,{position:"static"},r.a.createElement(f.a,null,r.a.createElement(p.a,{variant:"h6",className:t.title},r.a.createElement(u.c,{to:"/"},r.a.createElement("img",{className:t.title,src:"https://d26lpennugtm8s.cloudfront.net/stores/001/063/033/themes/common/logo-1421680389-1571774718-1624cbbd901c2cf55aa291fb448a8c991571774719.png?"}))),r.a.createElement(C.a,{className:t.formControl},r.a.createElement(k.a,{id:"demo-simple-select-outlined-label"},"Categories"),r.a.createElement(w.a,{labelId:"demo-controlled-open-select-outlined",id:"demo-controlled-open-outlined",value:b,onChange:function(t){var a=t.target.value;v(a),e("none"===a?"/":"/categories/".concat(a))}},r.a.createElement(O.a,{value:"none"},"None"),l.map((function(e){return r.a.createElement(O.a,{key:e.id,value:e.key},e.name)})))),r.a.createElement(u.c,{to:"/cart"},r.a.createElement(j,null)))))},F=a(166),T=function(e){var t=e.item,a=t.id,n=t.name,c=t.description,l=t.img;return r.a.createElement(F.a,{flexDirection:"colum"},r.a.createElement("h2",null,n),r.a.createElement(u.b,{to:"/item/".concat(a)},r.a.createElement("img",{src:l,alt:"img",width:"350"})),r.a.createElement("p",null,c))},A=function(e){var t=e.list;return r.a.createElement(F.a,{display:"flex",justifyContent:"space-around",flexWrap:"wrap"},t.map((function(e){return r.a.createElement(T,{key:e.id,item:e})})))},z=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(s.h)().categoryId;return Object(n.useEffect)((function(){var e=N();(l?e.collection("items").where("categoryId","==",l):e.collection("items")).get().then((function(e){0===e.size&&console.log("No existen resultados"),c(e.docs.map((function(e){return Object(i.a)({},e.data(),{id:e.id})})))}))}),[l]),r.a.createElement(A,{list:a})},P=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(z,null))},V=a(61),R=a.n(V),G=a(80),q=a(157),B=a(114),D=a(158),M=a(159),H=a(160),J=a(161),K=a(162),L=a(156),$=a(48),_=a(168),Q=function(e){var t=e.createOrder,a=Object(y.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"36ch"}}}})),c=Object(n.useState)({name:"",email:"",emailConfirmation:"",phone:""}),l=Object(m.a)(c,2),o=l[0],u=l[1],s=function(e){var t=e.target,a=t.name,n=t.value;u((function(e){return Object(i.a)({},e,Object($.a)({},a,n))}))},d=a(),f=!(o.email.length&&o.name.length&&o.emailConfirmation.length&&o.phone.length>0&&o.email===o.emailConfirmation);return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{display:"flex",justifyContent:"center"},r.a.createElement("form",{className:d.root,noValidate:!0,autoComplete:"off",fullWidth:!0},r.a.createElement(F.a,null,r.a.createElement(_.a,{required:!0,label:"Nombre y Apellido",Value:o.name,placeholder:"Nombre y Apellido",multiline:!0,name:"name",variant:"outlined",onChange:s}),r.a.createElement(_.a,{required:!0,label:"Email",Value:o.email,placeholder:"Email",multiline:!0,name:"email",variant:"outlined",onChange:s})),r.a.createElement(F.a,null,r.a.createElement(_.a,{required:!0,label:"Repetir email",Value:o.emailConfirmation,placeholder:"Confirma tu email",multiline:!0,name:"emailConfirmation",variant:"outlined",onChange:s}),r.a.createElement(_.a,{required:!0,label:"Tel\xe9fono de contacto",Value:o.phone,placeholder:"Tel\xe9fono de contacto",multiline:!0,name:"phone",variant:"outlined",onChange:s})))),r.a.createElement(F.a,{display:"flex",justifyContent:" flex-end",p:1},r.a.createElement(L.a,{disabled:f,variant:"contained",color:"secondary",onClick:function(){var e=o.name,a=o.email,n=o.phone;t({name:e,email:a,phone:n})}},"Finalizar compra")))},U=a(167),Y=function(e){return Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(e)},Z=function(){var e=r.a.useContext(v),t=e.cartItem,a=e.costoTotal,c=(e.cantTotal,Object(n.useState)(!1)),l=Object(m.a)(c,2),o=l[0],u=l[1],s=Object(n.useState)(null),d=Object(m.a)(s,2),f=d[0],p=d[1];if(0===t.length)return r.a.createElement(U.a,{severity:"warning"},"\xa1No se tiene productos seleccionados!");function E(){return(E=Object(G.a)(R.a.mark((function e(n){var r,c,l,o,m,u,s,d,f;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(),c=r.collection("orders"),l={buyer:n,cartItem:t,date:I.firestore.FieldValue.serverTimestamp(),total:a()},e.prev=3,e.next=6,c.add(l);case 6:o=e.sent,m=o.id,p(m),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("Error");case 14:return u=r.collection("items").where(I.firestore.FieldPath.documentId(),"in",t.map((function(e){return e.id}))),e.next=17,u.get();case 17:if(s=e.sent,d=r.batch(),f=[],s.docs.forEach((function(e,a){e.data().stock>=t[a].count?d.update(e.ref,{stock:e.data().stock-t[a].count}):f.push(Object(i.a)({},e.data(),{id:e.id}))})),0!==f.length){e.next=24;break}return e.next=24,d.commit();case 24:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}return f?r.a.createElement(U.a,{severity:"success"},"Tu orden de compra es: ",f):r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{component:B.a},r.a.createElement(D.a,{"aria-label":"simple table"},r.a.createElement(M.a,null,r.a.createElement(H.a,null,r.a.createElement(J.a,null,"Producto"),r.a.createElement(J.a,null,"Nombre"),r.a.createElement(J.a,{align:"right"},"Cantidad"),r.a.createElement(J.a,{align:"right"},"precio"))),r.a.createElement(K.a,null,t.map((function(e){return r.a.createElement(H.a,{key:e.id},r.a.createElement(J.a,{component:"th",scope:"row"},r.a.createElement("img",{src:e.img,alt:"img",style:{width:"82px"}})),r.a.createElement(J.a,null,e.name),r.a.createElement(J.a,{align:"right"},e.count),r.a.createElement(J.a,{align:"right"},Y(e.price)))})))),r.a.createElement(F.a,{display:"flex",justifyContent:"flex-end",p:1},"Costo total: ",a())),r.a.createElement(F.a,{display:"flex",justifyContent:" flex-end",p:1},r.a.createElement(L.a,{variant:"contained",color:"primary",onClick:function(){u(!0)}},"checkout")),o?r.a.createElement(Q,{createOrder:function(e){return E.apply(this,arguments)}}):null)},X=a(164),ee=a(163),te=a(81),ae=a.n(te),ne=function(e){var t=e.min,a=e.max,n=e.count,c=e.setCount;return r.a.createElement(F.a,{flexDirection:"colum",width:"185px",height:"100px"},r.a.createElement(F.a,{display:"flex",justifyContent:"space-between",border:"solid 1px black",borderRadius:"8px"},r.a.createElement(ae.a,{style:{fontSize:30},onClick:function(){n>t&&c(n-1)}}),r.a.createElement("span",null,n),r.a.createElement(ee.a,{style:{fontSize:30},disabled:n===a,onClick:function(){n<a&&c(n+1)}},"add_circle")))},re=function(e){var t=e.item,a=r.a.useState(1),n=Object(m.a)(a,2),c=n[0],l=n[1],o=r.a.useContext(v).productsAdd;return r.a.createElement(F.a,{display:"flex",justifyContent:"center",margin:"auto",flexWrap:"wrap",bgcolor:"grey.300",m:2},r.a.createElement(T,{item:t}),r.a.createElement(F.a,{margin:10},r.a.createElement(ne,{setCount:l,count:c,min:1,max:30}),r.a.createElement(L.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:function(){c>0&&o({id:t.id,name:t.name,img:t.img,count:c,price:t.price})}},"Comprar"),r.a.createElement("p",null,"Precio: $ ",Intl.NumberFormat().format(t.price)),r.a.createElement("p",null,"Stock disponible: ",t.stock)))},ce=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(m.a)(l,2),u=o[0],d=o[1],f=Object(s.h)().productId;return Object(n.useEffect)((function(){N().collection("items").doc(f).get().then((function(e){c(!1),d(Object(i.a)({id:e.id},e.data()))}))}),[f]),r.a.createElement(r.a.Fragment,null,a?r.a.createElement(X.a,{color:"secondary"}):r.a.createElement(re,{item:u}))};var le=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1];return r.a.createElement(v.Provider,{value:{cartItem:a,productsAdd:function(e){if(a.find((function(t){return t.id===e.id}))){var t=a.map((function(t){return t.id===e.id?Object(i.a)({},t,{count:e.count+t.count}):t}));c(t)}else c((function(t){return[].concat(Object(o.a)(t),[e])}))},costoTotal:function(){var e=a.reduce((function(e,t){return e+t.price*t.count}),0);return Y(e)},cantTotal:function(){return a.reduce((function(e,t){return e+t.count}),0)}}},r.a.createElement(u.a,null,r.a.createElement(W,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(P,null)),r.a.createElement(s.a,{path:"/categories/:categoryId"},r.a.createElement(P,null)),r.a.createElement(s.a,{exact:!0,path:"/cart"},r.a.createElement(Z,null)),r.a.createElement(s.a,{exact:!0,path:"/item/:productId"},r.a.createElement(ce,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},97:function(e,t,a){e.exports=a(112)}},[[97,1,2]]]);
//# sourceMappingURL=main.049b326d.chunk.js.map